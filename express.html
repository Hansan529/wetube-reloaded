<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>Express</title>
  </head>
  <body>
    <h1>#3.1 ~ 3.2 GET Requests</h1>
    <p>
      ì„œë²„ì— ì ‘ì†í•˜ë©´ <span class="codeline">Cannot GET /</span>ë¼ëŠ” í…ìŠ¤íŠ¸ê°€
      ë³´ì¸ë‹¤. ì´ëŠ” ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì—ê²Œ GET (http mathod) requestsë¥¼ ë³´ë‚´ê³  ìˆëŠ”
      ê²ƒì´ë‹¤.
    </p>
    <p>ì´ ìš”ì²­ì„ ë°˜ì‘í•˜ê¸° ìœ„í•´ì„œ</p>
    <pre class="codeBlock">
      const app = express();
      <span class="commit">// ì„œë²„ ìƒì„± ì´í›„</span>

      (<span class="text">"í•´ë‹¹ ìœ„ì¹˜ì— ì‘ì„±í•œë‹¤"</span>); app.get( app.get(<span
        class="text"
        >"/"</span
      >
      , () =&gt; <span class="console">console</span>.log(<span class="text"
        >"somebody is trying to go home."</span
      >
      <div class="commit">
        // button.addEvenListener("click", handleClick) ì™€ ê°™ì€ ë§¥ë½ì´ë‹¤.
      </div>

      <span class="commit">// ì™¸ë¶€ ì ‘ì†ì„ listen í•˜ê¸° ì „</span>
      <span class="const">const</span> handleListening = () =&gt;
      <span class="console">console</span>.log(<span class="text"
        >`Server listening on port http://localhost:</span
      >${PORT} ğŸš€`); app.listen(<span class="console">PORT</span>,
      handleListening);
    </pre>
    <p>
      ë¨¼ì € app.getìœ¼ë¡œ "/"ë¥¼ request ë°›ìœ¼ë©´ console.logë¥¼ ë°˜ì‘í•˜ê²Œ ë§Œë“¤ì—ˆë‹¤.
    </p>
    <p>
      ì„œë²„ì— ì ‘ì†í•œ í›„, ìƒˆë¡œê³ ì¹¨ì„ í•´ë³´ë©´ í˜ì´ì§€ê°€ ê³„ì† ë¡œë”©ë˜ë©´ì„œ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬
      ì˜¬ ìˆ˜ ì—†ì„ ê²ƒì´ë‹¤.
    </p>
    <p>
      ë‹¤ë¥¸ ì£¼ì†Œë¥¼ ì…ë ¥í•  ê²½ìš° &lt;http://localhost:4000/abcdefg&gt; ëŒ€ê¸° ì‹œê°„
      ì—†ì´ ë°”ë¡œë°”ë¡œ í˜ì´ì§€ê°€ ë¡œë”©ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
    </p>
    <p>
      / í˜ì´ì§€(home)ì— ì ‘ì†í•˜ë©´ ì„œë²„ì—ì„œëŠ” console.logì˜ ë‚´ìš©ì„ ì¶œë ¥í•œ ê²ƒì„ í™•ì¸
      í•  ìˆ˜ ìˆë‹¤.
    </p>
    <span class="codeline">somebody is tring to go home.</span>
    <span
      >í™ˆí˜ì´ì§€ë¥¼ ë³´ë©´ ê³„ì†í•´ì„œ ë¡œë”©í•œë‹¤. í•˜ì§€ë§Œ ì²˜ë¦¬ëŠ” ì§„í–‰í–ˆê³  ì‘ë‹µì„ ì•ˆí•˜ê³ 
      ìˆëŠ” ê²ƒì´ë‹¤.</span
    >

    <br />

    <h1>#3.3 Responses</h1>

    <pre class="codeBlock">
      <span class="const">const</span> handleHome = (req, res) =&gt;
      <span class="console">console</span>.log(<span class="text"
        >"somebody is trying to go home."</span
      >
      ); app.get(<span class="text">"/"</span>, handleHome);
    </pre>
    <p>
      EventListenerì—ê² eventê°€ ìˆê³ , expressì—ì„  2ê°œì˜ objectê°€ ìˆë‹¤. request
      object, responses object
    </p>
    <p>
      req, res ì´ë¦„ ëŒ€ì‹  ë‹¤ë¥¸ ì´ë¦„ì„ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ
      <strong>í•„ìˆ˜ë¡œ 2ê°€ì§€ë¥¼ ëª¨ë‘ ì‘ì„±í•´ì£¼ì–´ì•¼ í•œë‹¤.</strong> req í•˜ë‚˜ë§Œ
      ì‘ì„±í•œë‹¤ê±°ë‚˜, res í•˜ë‚˜ë§Œ ì‘ì„±í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
    </p>
    <p>
      &lt;&quot;req&quot;&gt; &nbsp;&nbsp; &lt;&quot;res&quot;&gt; í˜•ì‹ì´ë‹¤.
    </p>
    <p>
      reqë¥¼ console.logë¥¼ í•´ë³¸ë‹¤ë©´ https://localhost:4000/ í˜ì´ì§€ë¥¼ request
      í•´ë³¸ë‹¤ë©´ ë§¤ìš° ë§ì€ ê°’ë“¤ì„ ì½˜ì†”ì—ì„œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤
    </p>
    <pre class="codeBlock">
      <span class="commit">// express ìƒëµ</span>

      <span class="const">const</span> handleHome = (req, res) =&gt;
      <span class="console">console</span>.log(req); app.get(<span class="text"
        >"/"</span
      >, handleHome);
    </pre>

    <p>í•´ë‹¹ ê²°ê³¼ê°’ë“¤ì´ request objectì´ë‹¤.</p>

    <p>
      ë¸Œë¼ìš°ì €ê°€ ìš”ì²­í•˜ëŠ” ê²ƒì´ê³ , ì¿ í‚¤ë‚˜ GET, method ë“±ë“± ì—¬ëŸ¬ ì •ë³´ë“¤ì„ ì–»ì„ ìˆ˜
      ìˆë‹¤.
    </p>
    <pre class="codeBlock">
      <span class="commit">// ìƒëµ</span>

      <span class="const">const</span> handleHome = (req, res) =&gt;
      <span class="console">console</span>.log(res);
    </pre>

    <p>
      ë¸Œë¼ìš°ì €ê°€ requestë¥¼ ë³´ë‚´ë©´ ìš°ë¦¬ëŠ” ì‘ë‹µì„ í•´ì£¼ì–´ì•¼ í•˜ê¸°ì—
      <span class="const">return</span>ì„ ì‚¬ìš©í•œë‹¤.
    </p>

    <pre class="codeBlock">
      <span class="const">const</span> handleHome = (req, res) =&gt; {
      <span class="const">return</span> res.end(); };
    </pre>

    <p>
      ë‹¤ì‹œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³ , localhostì— requestë¥¼ ìš”ì²­í•˜ë©´, ë¸Œë¼ìš°ì €ê°€ ë¡œë”©ë˜ë˜
      ì´ì „ê³¼ëŠ” ë‹¤ë¥´ê²Œ return í•˜ì—¬ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê²Œëœë‹¤.
    </p>
    <p>í•´ë‹¹ í•¨ìˆ˜ê°€ responsesë¥¼ ì¢…ë£Œí•˜ì—¬ ì„œë²„ê°€ requestë¥¼ ëë‚´ë²„ë¦° ê²ƒì´ë‹¤</p>

    <p>ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œë„ requestë¥¼ ì¢…ë£Œì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>
    <p>
      <span class="codeline"><span class="const">return</span> res.send()</span>
      ì´ë ‡ê²Œ 2ê°€ì§€ê°€ ìˆë‹¤.
    </p>

    <h1>#3.5 Middlewares</h1>

    <p>
      MiddlewareëŠ” requestì™€ response ì‚¬ì´ì— ìˆë‹¤. ëª¨ë“  í•¨ìˆ˜(handle)ëŠ”
      controllerê°€ ë  ìˆ˜ë„ mideelewareê°€ ë ìˆ˜ìˆë‹¤.
    </p>

    <pre class="codeBlock">
      <p>
        <span class="const">import</span> express
        <span class="const">from</span> <span class="text">"express"</span>;
      </p>

      <span class="const">const</span> PORT = 4000;

      <span class="const">const</span> app = express();

      <span class="const">const</span> controllerHome = (req, res) =&gt; {
      <span class="const">return</span> res.end("&lt;h1&gt;HTML h1&lt;/h1&gt;");
      }; <span class="const">const</span> controllerLogin = (req, res) =&gt; {
      <span class="const">return</span> res.send({ message:
      <span class="text">"Login here"</span> }); }; app.get(<span class="text"
        >"/"</span
      >, controllerHome); app.get(<span class="text">"/login"</span>,
      controllerLogin);

      <span class="const">const</span> controllerListening = () =&gt;
      <span class="console">console</span>.log(<span class="text"
        >Server listening on port http://localhost:</span
      >${PORT} ğŸš€`); app.listen(<span class="console">PORT</span>,
      controllerListening);
    </pre>

    <p>
      reqì™€ res ë§ê³ ë„ í•œ ê°€ì§€ ìš”ì†Œê°€ ë” ìˆë‹¤. (req, res,
      <span class="codeline">next</span>) nextë¼ëŠ” ê²ƒì´ ìˆë‹¤. ë‹¤ìŒì„ ë¶ˆëŸ¬ì˜¤ëŠ”
      í•¨ìˆ˜ì¸ë°
    </p>

    <pre class="codeBlock">
      <span class="const">const</span> controllerHome = (req, res, next) =&gt; {
      next(); };
    </pre>

    <p>
      ì´ì™€ ê°™ì´ ë³€ê²½í•˜ê³  ë©”ì¸ ë£¨íŠ¸ë¡œ ì´ë™í•´ë³´ë©´ "Cannot GET /" ë¼ëŠ” í…ìŠ¤íŠ¸ë§Œ
      ë¡œë”©ëœë‹¤.
    </p>
    <p>ì™œëƒí•˜ë‚˜ë©´ ë‹¤ìŒ í•¨ìˆ˜ê°€ ì—†ê¸° ë•Œë¬¸ì— ë¶ˆëŸ¬ ì˜¬ ìˆ˜ ì—†ëŠ” ê²ƒì´ë‹¤.</p>

    <pre class="codeBlock">
      <span class="const">const</span> gossipMiddleware = (req, res, next) =&gt;
      { <span class="console">console</span>.log(<span class="text"
        >"I'm in the middle"</span
      >); next(); }; <span class="const">const</span> controllerHome = (req,
      res, next) =&gt; { <span class="const">return</span> res.end(); };
      app.get(<span class="text">"/"</span>, gossipMiddleware, controllerHome);
    </pre>

    <p>
      ì„œë²„ í„°ë¯¸ë„ì— "I'm in the middle" ì´ë¼ëŠ” í…ìŠ¤íŠ¸ì™€ next í•¨ìˆ˜ë¡œ
      controllerHome í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ returnì„ í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.
    </p>
    <p>
      gossipMiddleware í•¨ìˆ˜ê°€ middlewareê°€ ë˜ê³ , controllerHome í•¨ìˆ˜ê°€ returnì„
      í•˜ê¸° ë•Œë¬¸ì— finalwareê°€ ëœë‹¤.
    </p>

    <pre class="codeBlock">
      <span class="const">const</span> gossipMiddleware = (req, res, next) =&gt;
      { <span class="console">console</span>.log(`Someone is going to:
      ${req.url}`); next(); };
    </pre>

    <p>console: <span class="codeline">Someone is going to: /</span></p>

    <p>
      requestì˜ ì •ë³´ë¥¼ ê°€ì§€ê³  ì „ë‹¬í•´ì£¼ëŠ” ê²ƒì´ë¼ middlewareì—ì„œ req.url ê°’ì„
      í˜¸ì¶œí•´ë³´ë©´ ê°’ì„ ìœ ì§€í•˜ê³  ìˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
    </p>

    <p>
      <span class="codeline">gossipMiddleware</span>ëŠ” í˜„ì¬
      <span class="text">"/"</span> URLì—ì„œë§Œ ë°˜ì‘í•˜ëŠ”ë°, ì–´ëŠ URLì—ë„
      ì‘ë™í•˜ë„ë¡ ë§Œë“¤ì–´ ì£¼ëŠ” ê²Œ <span class="codeline">.use</span> methodì´ë‹¤.
    </p>

    <pre class="codeBlock">
      <span class="commit">// use ìˆœì„œëŠ” get ë³´ë‹¤ ë¨¼ì € ë¶ˆëŸ¬ì™€ì•¼ í•œë‹¤.</span>
      app.use(gossipMiddleware);

      <span class="commit">// controllerHome =&gt; handleHome</span>
      app.get("/", handleHome);
    </pre>

    <p>
      ë‹¤ë¥¸ ê²½ë¡œë¡œ reqë¥¼ ë³´ë‚´ë³´ë©´ cannot GET /@@@@ ê°€ í‘œì‹œë˜ì§€ë§Œ í„°ë¯¸ë„ì—ëŠ” í•´ë‹¹
      ê²½ë¡œê°’ì„ ë³¼ ìˆ˜ ìˆë‹¤.
    </p>

    <p>í•˜ì§€ë§Œ ì´ ìˆœì„œë¥¼ ë°˜ëŒ€ë¡œ ì§€ì •í•˜ë©´ ì½˜ì†”ì—ëŠ” ì•„ë¬´ëŸ° ì •ë³´ë„ ì—†ë‹¤.</p>

    <pre class="codeBlock">
      app.get("/", handleHome); app.use(gossipMiddleware);
    </pre>

    <p>
      requestê°€ ìš”ì²­ë˜ì–´ handleHomeì„ ì‹¤í–‰í•˜ê³ , ê·¸ í›„ì— gossipMiddlewareë¥¼
      ì‹¤í–‰í•˜ë„ë¡ expressëŠ” ì§€ì •ì„ í–ˆëŠ”ë°,
    </p>

    <p>
      handleHomeì—ì„œ requestë¥¼ ì¢…ë£Œì‹œì¼°ê¸°ì— gossipMiddlewareê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”
      ê²ƒì´ë‹¤. + <span class="codeline">req.method</span>ë¥¼ í˜¸ì¶œí•˜ë©´ ì–´ë–¤
      methodë¡œ í˜¸ì¶œ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤. ê¸°ë³¸ìœ¼ë¡œëŠ”
      <span class="codeline">GET</span>ì´ë‹¤.
    </p>

    <pre class="codeBlock">
      <span class="commit">// gossipMiddleware</span>
      <span class="const">const</span> logger = (req, res, next) =&gt; {
      <span class="console">console</span>.log(`${req.method} ${req.url}`);
      next(); };
      <span class="commit">// ìƒˆë¡œìš´ middleware</span>
      <span class="const">const</span> privateMiddleware = (req, res, next)
      =&gt; { <span class="const">const</span> url = req.url; if (url ===
      "/protected") { <span class="const">return</span> res.send("&lt;h1&gt;Not
      Allowed&lt;/h1&gt;"); } next(); }; app.use(logger, privateMiddleware);
      app.get(<span class="text">"/"</span>, handleHome);
    </pre>

    <p>
      ì–´ë– í•œ ê²½ë¡œë¥¼ ìš”ì²­í•˜ë˜ì§€ loggerì™€ privateMiddleware í•¨ìˆ˜ëŠ” ì‹¤í–‰ë˜ë„ë¡
      í•˜ê³ , ë§Œì•½ ìš”ì²­í•œ ê²½ë¡œê°€ protectedì¼ ê²½ìš° Not Allowedë¥¼ htmlì— ì¶œë ¥í•˜ê³ ,
      ì•„ë‹ ê²½ìš°ì—ëŠ” nextë¡œ ë„˜ê¸´ë‹¤.
    </p>

    <h1># ì •ë³´, Recap</h1>

    <p>
      .getì€ functionì´ í•„ìš”í•˜ë‹¤. <span class="codeline">1+1</span>,
      <span class="codeline">console.log("hi")</span>ì™€ ê°™ì€ ê²ƒì€ ë°”ë¡œ ì‹¤í–‰í•˜ê¸°
      ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ê³ , ì´ ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”
    </p>

    <p>
      ë³„ë„ì˜ functionì„ ìƒì„±í•´ì„œ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜,
      <span class="codeline">app.get("", () =&gt; console.log("hi"))</span>ì™€
      ê°™ì´ inline functionì„ ì§€ì •í•´ì£¼ì–´ì•¼ ì—ëŸ¬ê°€ ì‚¬ë¼ì§„ë‹¤.
    </p>

    <pre class="codeBlock">
      <span class="commit"
        >// ìœ ì§€ë³´ìˆ˜ ì°¨ì›ìœ¼ë¡œ ë³„ë„ì˜ functionì„ ìƒì„±í•´ì„œ ì§€ì •í•˜ëŠ”ê²Œ ì¢‹ë‹¤.</span
      >

      <span class="commit">// function</span>
      <span class="const">const</span> handleHome = (req, res) =&gt; {
      res.sedn(<span class="text">"hello"</span>); };

      <span>app.get(<span class="text">"/"</span>, handleHome);</span>

      <span class="commit">// inline</span>
      app.get(<span class="text">"/"</span>, (req, res) =&gt;
      res.send("hello"));
    </pre>

    <p>
      <span class="codeline">handler</span>ì˜ ê²½ìš° ì´ë¦„ì€ req, resë¡œ ì§€ì • í• 
      í•„ìš” ì—†ë‹¤. ë‹¨ì§€ ì½”ë“œë¥¼ ë´¤ì„ ë•Œ ì¸ì§€í•˜ê¸° ì‰½ë„ë¡ í•œ ê²ƒì´ë‹¤.
    </p>

    <pre class="codeBlock">
      <span class="commit">// ê¸°ì¡´ ì½”ë“œ</span>
      <span class="const">const</span> handleHome = (req, res) =&gt; {
      <span class="const">return</span> res.send("&lt;h1&gt;hello&lt;/h1&gt;");
      };

      <div class="commit">
        //argumentì˜ ìœ„ì¹˜ ìˆœì„œë§Œ ì§€ì¼œì£¼ë©´ ì–´ë– í•œ ì´ë¦„ë„ ìƒê´€ ì—†ë‹¤.
        //request-object, response-object ìˆœì„œì´ë‹¤.
      </div>
      <span class="const">const</span> handleHome = (x, y) =&gt; {
      <span class="const">return</span> y.send("&lt;h1&gt;hello&lt;/h1&gt;"); };
    </pre>

    <h2>morgan</h2>

    <p>
      GET, path, status code , ì‘ë‹µì‹œê°„ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³ ìˆëŠ” middlewareì´ë‹¤.
    </p>

    <p>
      <span class="codeline">npm i morgan</span> ìœ¼ë¡œ ì„¤ì¹˜ ê°€ëŠ¥í•˜ê³ ,
      <span class="codeline"> import &lt;morgan&gt; from "morgan"; </span>`
      &lt;morgan&gt;ì€ ë³„ëª…ì´ê¸°ì— ë§ˆìŒëŒ€ë¡œ ì§€ì •í•´ë„ ëœë‹¤. &lt;morgan&gt;ì€
      ë³„ëª…ì´ê¸°ì— ë§ˆìŒëŒ€ë¡œ ì§€ì •í•´ë„ ëœë‹¤.
    </p>

    <pre class="codeBlock">
      <span class="const">import</span> morgan
      <span class="const">from</span> "morgan"; // ìƒëµ

      <span class="const">const</span> logger = morgan("dev"); app.use(logger);
    </pre>

    <pre class="codeBlock">
      <span class="commit">// Method, Url, statusCode, ì‘ë‹µì‹œê°„</span>
      <span class="console">GET</span> / 304 2.339 ms - -
    </pre>
  </body>
</html>
